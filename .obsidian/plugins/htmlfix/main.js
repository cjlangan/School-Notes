/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HtmlLocalSrcPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var HtmlLocalSrcPlugin = class extends import_obsidian.Plugin {
  async onload() {
    this.registerMarkdownPostProcessor((element) => {
      const targetLinks = Array.from(element.getElementsByTagName("img")).filter(
        (link) => link.src.contains("_media")
        // Can potentially be removed if image URLs directly reference "Images" folder
      );
      let base_path = this.app.vault.adapter.basePath;
      console.log("base_path: " + base_path);
      const active_file_path = this.app.workspace.getActiveFile().path;
      console.log("active_file_path: " + active_path);
      for (const link of targetLinks) {
        let clean_link = link.src.replace("app://obsidian.md/", "");
        console.log("clean_link: " + clean_link);
        let full_link = "app://local" + base_path + "/" + clean_link;
        console.log("full_link: " + full_link);
        link.src = full_link;
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0bWxMb2NhbFNyY1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50KSA9PiB7XG5cbiAgICAgIGNvbnN0IHRhcmdldExpbmtzID0gQXJyYXkuZnJvbShlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpKS5maWx0ZXIoXG4gICAgICAgIChsaW5rKSA9PlxuICAgICAgICAgIGxpbmsuc3JjLmNvbnRhaW5zKFwiX21lZGlhXCIpIC8vIENhbiBwb3RlbnRpYWxseSBiZSByZW1vdmVkIGlmIGltYWdlIFVSTHMgZGlyZWN0bHkgcmVmZXJlbmNlIFwiSW1hZ2VzXCIgZm9sZGVyXG4gICAgICApO1xuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGxldCBiYXNlX3BhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmJhc2VQYXRoO1xuICAgICAgY29uc29sZS5sb2coJ2Jhc2VfcGF0aDogJyArIGJhc2VfcGF0aClcbiAgICAgIGNvbnN0IGFjdGl2ZV9maWxlX3BhdGggPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLnBhdGg7XG4gICAgICAvLyBjb25zdCBhY3RpdmVfcGF0aCA9IGFjdGl2ZV9maWxlX3BhdGguc3Vic3RyaW5nKDAsIGFjdGl2ZV9maWxlX3BhdGgubGFzdEluZGV4T2YoXCIvXCIpKTsgLy8gUmVtb3ZlZFxuICAgICAgY29uc29sZS5sb2coJ2FjdGl2ZV9maWxlX3BhdGg6ICcgKyBhY3RpdmVfcGF0aClcbiAgICAgIGZvciAoY29uc3QgbGluayBvZiB0YXJnZXRMaW5rcykge1xuICAgICAgICBsZXQgY2xlYW5fbGluayA9IGxpbmsuc3JjLnJlcGxhY2UoJ2FwcDovL29ic2lkaWFuLm1kLycsICcnKVxuICAgICAgICBjb25zb2xlLmxvZygnY2xlYW5fbGluazogJyArIGNsZWFuX2xpbmspXG4gICAgICAgIGxldCBmdWxsX2xpbmsgPSAnYXBwOi8vbG9jYWwnICsgYmFzZV9wYXRoICsgJy8nICsgY2xlYW5fbGluazsgLy8gTW9kaWZpZWQgbGluZSAoT3B0aW9uIDEpXG4gICAgICAgIGNvbnNvbGUubG9nKCdmdWxsX2xpbms6ICcgKyBmdWxsX2xpbmspXG4gICAgICAgIGxpbmsuc3JjID0gZnVsbF9saW5rXG5cbiAgICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBdUI7QUFFdkIsSUFBcUIscUJBQXJCLGNBQWdELHVCQUFPO0FBQUEsRUFDckQsTUFBTSxTQUFTO0FBQ2IsU0FBSyw4QkFBOEIsQ0FBQyxZQUFZO0FBRTlDLFlBQU0sY0FBYyxNQUFNLEtBQUssUUFBUSxxQkFBcUIsS0FBSyxDQUFDLEVBQUU7QUFBQSxRQUNsRSxDQUFDLFNBQ0MsS0FBSyxJQUFJLFNBQVMsUUFBUTtBQUFBO0FBQUEsTUFDOUI7QUFHQSxVQUFJLFlBQVksS0FBSyxJQUFJLE1BQU0sUUFBUTtBQUN2QyxjQUFRLElBQUksZ0JBQWdCLFNBQVM7QUFDckMsWUFBTSxtQkFBbUIsS0FBSyxJQUFJLFVBQVUsY0FBYyxFQUFFO0FBRTVELGNBQVEsSUFBSSx1QkFBdUIsV0FBVztBQUM5QyxpQkFBVyxRQUFRLGFBQWE7QUFDOUIsWUFBSSxhQUFhLEtBQUssSUFBSSxRQUFRLHNCQUFzQixFQUFFO0FBQzFELGdCQUFRLElBQUksaUJBQWlCLFVBQVU7QUFDdkMsWUFBSSxZQUFZLGdCQUFnQixZQUFZLE1BQU07QUFDbEQsZ0JBQVEsSUFBSSxnQkFBZ0IsU0FBUztBQUNyQyxhQUFLLE1BQU07QUFBQSxNQUVYO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDSDtBQUNGOyIsCiAgIm5hbWVzIjogW10KfQo=
